"use strict";var fs=require("fs"),csv=require("csv-parser");function getCsvData(r){var n,t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Map,t=new Promise(function(e,t){fs.createReadStream("sample.csv").pipe(csv()).on("data",function(e){try{Number(e.timestamp)<=r&&(n.get(e.token)||n.set(e.token,0),"DEPOSIT"==e.transaction_type?n.set(e.token,Number(n.get(e.token))+Number(e.amount)):n.set(e.token,Number(n.get(e.token))-Number(e.amount)))}catch(e){console.log("error")}}).on("end",function(){e(n)})}),e.abrupt("return",Promise.resolve(t));case 4:case"end":return e.stop()}})}module.exports={getCsvData:getCsvData};